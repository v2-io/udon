---
id: udon-realistic-20251223-214525-bdfd8cce
task: 'Realistic: markdown_to_udon @ minimal'
test_type: realistic
context_lines: 122
model: claude-haiku-4-5-20251001
prompt: |
  ## Context

  UDON is a notation for mixed content—prose with embedded structure.
  Here's a reference:

  ```udon
  ; UDON Minimal Reference — "|" element, ":" attribute, ";" comment, "!" dynamic

  ; === CORE PATTERNS ===

  |element[id].class :attr value
  |element[id].class :attr value Content on same line
  |element[id].class :attr value |child Child content here
  |element
    |child
    Prose content with |{em inline elements} and !{interpolation}.

  ; Inline elements embed structure in prose:
  |p Prose with |{em emphasis}, |{strong bold}, and |{a :href /doc links}.
  |p Nested: |{strong This is |{em very} important}.
  |p With attrs: |{a :href /x :title "Tooltip" click here}.

  ; Rightward nesting vs inline siblings:
  |a |b |c                        ; a > b > c (nesting)
  |a :x 1 |b :y 2 |c Content      ; nesting with attrs at each level
  |div |{a Link} |{b Text} |{c More}  ; div > (a, b, c) (siblings)

  ; === ATTRIBUTES ===
  ; Type comes from syntax, not value-sniffing (no "Norway problem")

  |config
    :string      "hello world"    ; string (quoted)
    :unquoted    simple-value     ; string (unquoted)
    :number      42               ; integer
    :float       3.14             ; float
    :bool        true             ; boolean (also: false)
    :null        nil              ; nil (also: null, ~)
    :flag                         ; true (no value = flag)
    :list        [one two three "with spaces"]
    :empty       []
    :mixed       [42 true "hi" nil]

    ; Structured attribute with children:
    :headers
      |header :name Content-Type :value application/json
    :inline-val  |{limit :requests 100 :window 60s}

  ; === ELEMENTS ===

  ; Element variations:
  |element-name[optional-id].class1.class2
  |[id-only]                           ; no element name
  |empty                               ; empty element

  ; Class-only elements (mixins):
  |.reusable :timeout 30
  |.logging :level info
  |service.reusable.logging :name mine ; multiple mixins

  ; Element suffixes become quoted attributes:
  |functional?             ; == |functional :'?' true
  |field?[opt]             ; suffix before id
  |children[clist]+        ; == |children[clist] :'+' true

  ; === REFERENCES ===

  |license[mit]
    MIT License text here...

  |project
    :name "My Project"
    :license @[mit]               ; @[id] inserts full element

  |.db-defaults[base]
    :adapter postgres
    :pool 5

  |database :[base] :name mydb    ; :[id] merges attributes

  ; === DYNAMICS ===

  |page :title !{page.title}

    ; Conditionals:
    !if user
      Welcome, !{user.name | capitalize}!
      !if user.admin
        |admin-panel
      !elif user.moderator
        |mod-panel
      !else
        |user-panel
    !else
      |login-prompt

    ; Iteration:
    !for post in posts
      |article :id post-!{post.id}
        |h2 !{post.title}
        |p !{post.excerpt | truncate 200}

    ; Local binding:
    !let featured = posts | where "featured" true | first
      |featured !{featured.title}

  ; Raw code blocks (not parsed as UDON):
  !code :lang elixir
    def hello do
      "world" |> String.upcase()  # This pipe is Elixir
    end

  ; Include other files:
  !include partials/header

  ; === ESCAPING ===

  ; Apostrophe escapes the next character:
  '|not-an-element — prose starting with pipe
  ':not-an-attribute — colon in text
  ';not-a-comment — semicolon in prose
  ''literal apostrophe

  ; Triple backtick for raw blocks:
  |example
    Normal UDON here, then: ```
  |this is literal, not an element
  :this too
  ``` Back to UDON.

  ```

  ## Input

  ```
  # API Documentation

  **Version:** 2.1.0
  **Last Updated:** 2025-01-15

  ## Authentication

  All requests require a bearer token. Get one from the `/oauth/token` endpoint.

  The token expires after 1 hour. Include it in the `Authorization` header.

  ## Rate Limits

  | Tier | Requests/min |
  |------|--------------|
  | Free | 60 |
  | Pro | 600 |

  Contact sales@example.com for enterprise limits.
  ```

  ## Task

  Convert this markdown to UDON. The version and date should be attributes, not prose. Tables can stay as markdown or become structured—your choice. Preserve the document flow.

  Output UDON only. No explanation.
response: |-
  |doc :version "2.1.0" :updated "2025-01-15"
    |h1 API Documentation

    |section.authentication
      |h2 Authentication
      |p All requests require a bearer token. Get one from the |{code /oauth/token} endpoint.
      |p The token expires after 1 hour. Include it in the |{code Authorization} header.

    |section.rate-limits
      |h2 Rate Limits
      |table
        |thead
          |tr
            |th Tier
            |th Requests/min
        |tbody
          |tr
            |td Free
            |td 60
          |tr
            |td Pro
            |td 600
      |p Contact |{a :href mailto:sales@example.com sales@example.com} for enterprise limits.
success:
notes:
feedback: 'Judge scores: {"error":"unexpected end of input, expected closing \" at
  line 5 column 122"}'
created_at: '2025-12-24T04:45:25Z'
