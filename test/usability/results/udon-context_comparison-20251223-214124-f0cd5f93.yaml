---
id: udon-context_comparison-20251223-214124-f0cd5f93
task: 'Context comparison: mixed_doc @ minimal'
test_type: context_comparison
context_lines: 122
model: claude-haiku-4-5-20251001
prompt: |
  ## Context

  You're testing a notation called UDON. Here's a reference:

  ```udon
  ; UDON Minimal Reference — "|" element, ":" attribute, ";" comment, "!" dynamic

  ; === CORE PATTERNS ===

  |element[id].class :attr value
  |element[id].class :attr value Content on same line
  |element[id].class :attr value |child Child content here
  |element
    |child
    Prose content with |{em inline elements} and !{interpolation}.

  ; Inline elements embed structure in prose:
  |p Prose with |{em emphasis}, |{strong bold}, and |{a :href /doc links}.
  |p Nested: |{strong This is |{em very} important}.
  |p With attrs: |{a :href /x :title "Tooltip" click here}.

  ; Rightward nesting vs inline siblings:
  |a |b |c                        ; a > b > c (nesting)
  |a :x 1 |b :y 2 |c Content      ; nesting with attrs at each level
  |div |{a Link} |{b Text} |{c More}  ; div > (a, b, c) (siblings)

  ; === ATTRIBUTES ===
  ; Type comes from syntax, not value-sniffing (no "Norway problem")

  |config
    :string      "hello world"    ; string (quoted)
    :unquoted    simple-value     ; string (unquoted)
    :number      42               ; integer
    :float       3.14             ; float
    :bool        true             ; boolean (also: false)
    :null        nil              ; nil (also: null, ~)
    :flag                         ; true (no value = flag)
    :list        [one two three "with spaces"]
    :empty       []
    :mixed       [42 true "hi" nil]

    ; Structured attribute with children:
    :headers
      |header :name Content-Type :value application/json
    :inline-val  |{limit :requests 100 :window 60s}

  ; === ELEMENTS ===

  ; Element variations:
  |element-name[optional-id].class1.class2
  |[id-only]                           ; no element name
  |empty                               ; empty element

  ; Class-only elements (mixins):
  |.reusable :timeout 30
  |.logging :level info
  |service.reusable.logging :name mine ; multiple mixins

  ; Element suffixes become quoted attributes:
  |functional?             ; == |functional :'?' true
  |field?[opt]             ; suffix before id
  |children[clist]+        ; == |children[clist] :'+' true

  ; === REFERENCES ===

  |license[mit]
    MIT License text here...

  |project
    :name "My Project"
    :license @[mit]               ; @[id] inserts full element

  |.db-defaults[base]
    :adapter postgres
    :pool 5

  |database :[base] :name mydb    ; :[id] merges attributes

  ; === DYNAMICS ===

  |page :title !{page.title}

    ; Conditionals:
    !if user
      Welcome, !{user.name | capitalize}!
      !if user.admin
        |admin-panel
      !elif user.moderator
        |mod-panel
      !else
        |user-panel
    !else
      |login-prompt

    ; Iteration:
    !for post in posts
      |article :id post-!{post.id}
        |h2 !{post.title}
        |p !{post.excerpt | truncate 200}

    ; Local binding:
    !let featured = posts | where "featured" true | first
      |featured !{featured.title}

  ; Raw code blocks (not parsed as UDON):
  !code :lang elixir
    def hello do
      "world" |> String.upcase()  # This pipe is Elixir
    end

  ; Include other files:
  !include partials/header

  ; === ESCAPING ===

  ; Apostrophe escapes the next character:
  '|not-an-element — prose starting with pipe
  ':not-an-attribute — colon in text
  ';not-a-comment — semicolon in prose
  ''literal apostrophe

  ; Triple backtick for raw blocks:
  |example
    Normal UDON here, then: ```
  |this is literal, not an element
  :this too
  ``` Back to UDON.

  ```

  ## Task

  Write a UDON document that's a short tutorial explaining how to use an API. Include prose explanation with inline code references, a structured endpoint definition, and a note about rate limits.

  Output only valid UDON. No explanation needed.
response: |-
  ```udon
  |article.tutorial
    |h1 Getting Started with the Weather API

    |section
      |h2 Introduction
      |p
        The Weather API provides real-time weather data for any location worldwide.
        This tutorial will show you how to make your first request using the
        |{code /weather} endpoint and parse the response.

    |section
      |h2 Authentication
      |p
        All requests require an API key. Include it as a query parameter:
        |{code ?key=YOUR_API_KEY}. You can generate a key in your
        |{a :href https://dashboard.example.com/keys dashboard}.

    |section
      |h2 Your First Request
      |p
        Make a GET request to fetch current weather data:
      |code-block :lang bash
        curl "https://api.weather.example.com/weather?location=London&key=YOUR_API_KEY"

    |section
      |h2 Endpoint Reference
      |endpoint[weather-endpoint]
        :method GET
        :path /weather
        :description Fetches current weather conditions
        :parameters
          |param :name location :type string :required true :description "City name or coordinates"
          |param :name units :type string :required false :description "celsius or fahrenheit"
          |param :name key :type string :required true :description "Your API key"
        :response
          |field :name temperature :type number :description "Current temperature"
          |field :name condition :type string :description "Weather condition"
          |field :name humidity :type number :description "Humidity percentage"

    |section
      |h2 Example Response
      |code-block :lang json
        {
          "temperature": 15.5,
          "condition": "Partly Cloudy",
          "humidity": 72,
          "location": "London"
        }

    |section.warning
      |h2 Rate Limits
      |p
        Your API tier includes !{limit} requests per !{window}. Once you exceed
        this limit, the API returns a 429 Too Many Requests response. Consider
        implementing caching in your application to minimize request volume.
      :limit 1000
      :window "24 hours"

    |section
      |h2 Next Steps
      |ul
        |li Read the |{a :href /docs/endpoints full endpoint documentation}
        |li Explore |{a :href /docs/examples code examples} in multiple languages
        |li Join our |{a :href /community community forum} for support
  ```
success:
notes:
feedback:
created_at: '2025-12-24T04:41:24Z'
