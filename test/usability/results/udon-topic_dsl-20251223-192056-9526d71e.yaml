---
id: udon-topic_dsl-20251223-192056-9526d71e
task: 'Topic DSL: Chaos engineering'
test_type: topic_dsl
context_lines: 0
model: claude-sonnet-4-5-20250929
prompt: |
  ## Context

  You're participating in notation design research. This is a one-shot
  interaction—you won't receive a reply, but your response will be
  reviewed by humans. Please prioritize honesty over any attempt to
  please; skepticism and criticism are valuable.

  ## UDON: Universal Document & Object Notation

  UDON unifies data, documents, and configuration in one syntax. The key
  insight: most real content is **mixed**—prose with structured data woven
  throughout, not segregated into "data files" vs "documents."

  Here is a comprehensive example showing UDON's capabilities:

  ```udon
  ; ============================================================================
  ; UDON Comprehensive Syntax Example
  ; Exercises the full specification (excluding exotic number types)
  ; ============================================================================

  ; ----------------------------------------------------------------------------
  ; MIXINS — Class-only elements define reusable traits
  ; ----------------------------------------------------------------------------

  |.base-service
    :version 1.0
    :timeout 30
    :retries 3

  |.logging :log-level info :log-format json

  |.cached
    :cache-enabled true
    :cache-ttl 3600

  ; ----------------------------------------------------------------------------
  ; CONFIGURATION — Data-centric usage
  ; ----------------------------------------------------------------------------

  |config[app-config]
    :name        "My Application"
    :debug       false
    :environment !{env.APP_ENV}

    ; Database with structured credentials
    |database[primary].base-service
      :adapter postgres
      :host    db.example.com
      :port    5432
      :pool    10
      :ssl

      |credentials
        :username !{env.DB_USER}
        :password !{env.DB_PASS}

    ; Cache inherits from multiple mixins
    |cache[redis].base-service.logging.cached
      :host cache.example.com
      :port 6379

    ; Feature flags demonstrate various value types
    |features
      :enabled-flags [dark-mode notifications beta-features]
      :rate-limits [100 500 1000]
      :mixed-example [42 true "hello" nil]
      :empty-list []

    ; Absent vs nil vs false demonstration
    |nil-test
      :flag-present           ; true (flag with no value)
      :explicit-true   true   ; true
      :explicit-false  false  ; false
      :null-value      null   ; nil (JSON style)
      :nil-value       nil    ; nil (Ruby style)
      :tilde-value     ~      ; nil (YAML style)
      ; :absent-key is not here — it's absent, not nil

  ; ----------------------------------------------------------------------------
  ; SCHEMA — Using element suffixes for DSL semantics
  ; ----------------------------------------------------------------------------

  |schema[user]
    :description "User account schema"
    |field[id]!                     :type integer :auto-increment
    |field[email]!                  :type string  :format email :unique
    |field[name]?                   :type string  :max-length 100
    |field[roles]*                  :type string  :enum [admin user guest]
    |field[primary-role]+           :type string
    ; Suffix position variations
    |field?[optional-with-id]       :type string
    |field[another-id]? .searchable :type string

  ; ----------------------------------------------------------------------------
  ; DOCUMENT — Prose-centric usage with embedded structure
  ; ----------------------------------------------------------------------------

  |article[welcome-guide]
    :author Joseph Wecker
    :date 2025-12-22
    :tags [udon tutorial documentation]
    :status published

    |h1 Welcome to UDON

    UDON is a **unified notation** for data, documents, and configuration.
    The key insight: most real content is |{em mixed}—not purely data
    |{em or} purely prose, but |{dfn :id mixed-content mixed content} where
    structure appears |{ul inline} exactly where it's needed.

    Consider this paragraph: it contains |{abbr :title "Application Programming Interface" API}
    references, |{a :href #getting-started internal links}, and even
    |{data :value 42 :type metric a structured data point} all flowing
    naturally within the prose.

    ## Why Another Format?

    Existing formats force uncomfortable trade-offs. See the comparison
    in |{a :href #format-comparison Table 1} below:

    |table[format-comparison]   ; Obviously this could just be a markdown table instead, but demoing more structure
      |tr      |{th Format}     |{th Prose} |{th Data}  |{th Inline}
      |tr      |{td JSON}       |{td poor}  |{td great} |{td none}
      |tr      |{td YAML}       |{td poor}  |{td good}  |{td none}
      |tr      |{td XML}        |{td ok}    |{td ok}    |{td verbose}
      |tr      |{td Markdown}   |{td great} |{td poor}  |{td limited}
      |tr.emph |{td |{em UDON}} |{td great} |{td great} |{td |{em natural}}

    As |{cite :author "Kay" :year 1993 Alan Kay} noted in his work on
    Smalltalk: |{q the best notation is one you don't notice}. UDON aims
    for exactly this—structure that doesn't interrupt reading.

    |blockquote
      :source "Ancient Proverb"
      :cited-by |{a :href https://example.com Source}

      The best notation is the one that gets out of your way
      while keeping your data safe.

    |section[getting-started]
      :level 2

      ### Your First UDON File

      Here's what makes UDON special—you can explain things in natural
      prose while embedding |{code :lang udon |server :host localhost}
      inline, or break out to a full example:

      !code :udon
        |server
          :host localhost
          :port 8080

      The |{code "|"} prefix marks structure. The |{code ":"} prefix marks
      attributes. Everything else is just prose. For inline elements,
      use |{code "|{element content}"} syntax.

      ### Escaping Special Characters

      Sometimes you need literal prefix characters:

      '|this is not an element — it's prose starting with a pipe
      ':this is not an attribute — just text with a colon
      ';this is not a comment — semicolons in prose
      ''and this shows a literal apostrophe

      Back to normal prose here.

    |section[advanced-topics]
      :level 2

      ### Inline Nesting vs Embedded Elements

      Two syntaxes for different purposes:

      |div |span |strong Rightward nesting ; children nest rightward

      |p Prose with |{em emphasis}, |{strong |{em nested} formatting}, and
         |{a :href /doc :title "Full documentation" the |{em official} docs}.

      The first uses |{code |element} for structural nesting. The second
      uses |{code "|{element}"} for inline content within prose—crucial
      for |{dfn :id mixed-content-def documents where structure and prose
      are interwoven}.

      ### Navigation Example

      |nav.main |{a :href / Home} |{a :href /about About} |{a :href /docs Docs} |{a :href /contact Contact}

      ### Code Samples

      Use |{code !code} for non-UDON content:

      !code :elixir
        defmodule Example do
          def hello do
            # This pipe is Elixir, not UDON
            "world" |> String.upcase()
          end
        end

      !code :sql
        SELECT u.name, u.email
        FROM users u
        WHERE u.active = true
          AND u.created_at > '2025-01-01'
        ORDER BY u.name;

  ; ----------------------------------------------------------------------------
  ; TEMPLATE — Dynamic content with control flow
  ; ----------------------------------------------------------------------------

  |template[page-layout]
    :doctype html5

    !include partials/head

    |html :lang !{locale | default "en"}
      |head
        |meta :charset utf-8
        |title !{page.title} — !{site.name}

        !for stylesheet in stylesheets
          |link :rel stylesheet :href !{stylesheet}

        !if page.has_custom_css |style !{page.custom_css}

      |body :class !{body_classes | join " "}

        |header
          !include partials/nav

          !if announcements
            |div.announcements
              !for announcement in announcements
                |div.announcement :class !{announcement.type}
                  !{announcement.message | escape}

        |main[content]
          !if user
            |section.welcome
              Welcome back, !{user.name | capitalize}!

              !if user.is_admin
                |div.admin-notice You have !{pending_tasks | size} pending admin tasks.
              !elif user.is_moderator
                |div.mod-notice Moderation queue: !{mod_queue | size} items
              !else Your last login: !{user.last_login | format "%B %d, %Y"}

          !else
            |section.guest
              |p Welcome, guest!
              |a :href /login Please sign in
              |span or
              |a :href /register create an account

          !let featured = posts | where "featured" true | first
            !if featured
              |article.featured
                |h2 !{featured.title}
                !{featured.excerpt | truncate 200}

          |section.posts
            !for post in posts
              |article :id post-!{post.id}
                |h3 |a :href /posts/!{post.id} !{post.title}
                |p.meta
                  By !{post.author.name} on !{post.date | format "%Y-%m-%d"}
                |p !{post.excerpt}

        !include partials/footer

  ; ----------------------------------------------------------------------------
  ; COMPLEX ATTRIBUTES — Structured values under attributes
  ; ----------------------------------------------------------------------------

  |api-endpoint[create-user]
    :method POST
    :path /api/users
    :auth required

    :headers
      |header :name Content-Type :value application/json
      |header :name X-API-Version :value "2025-01"
      |header :name Authorization :value Bearer !{token}

    :request-body
      |field[email] :type string :required
      |field[password] :type string :required :min-length 8
      |field[name] :type string

    :responses
      |response :status 201 :description "User created"
      |response :status 400 :description "Validation error"
      |response :status 409 :description "Email already exists"

  ; ----------------------------------------------------------------------------
  ; REFERENCES — ID references for reuse
  ; ----------------------------------------------------------------------------

  ; Two forms of ID reference:
  ;   @[id] — Insert entire element (structure + content)
  ;   :[id] — Merge only attributes from that element

  |license[mit]
    MIT License

    Copyright (c) 2025 Joseph Wecker

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files...

  |license[apache-2]
    Apache License, Version 2.0

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License...

  ; @[id] — Full element insertion
  |project[udon-parser]
    :name "UDON Parser"
    :version 0.7.0
    :license @[mit]              ; Inserts the full |license[mit] element here
    :homepage https://github.com/example/udon
    :authors ["Joseph Wecker" "Contributors"]
    :keywords [parser notation data documents]

  |project[udon-tools]
    :name "UDON Tools"
    :version 0.1.0
    :license @[apache-2]
    :dependencies
      |dep :name udon-parser :version "~> 0.7"

  ; :[id] — Attribute merge (like mixin but via ID)
  |.db-defaults[base-db]
    :adapter postgres
    :host localhost
    :pool 5
    :timeout 30

  ; Merge base-db attributes, then override/add specific ones
  |database[dev]  :[base-db] :database myapp_dev  :pool  2
  |database[prod] :[base-db] :database myapp_prod :pool 20 :ssl

  ; ----------------------------------------------------------------------------
  ; EMBEDDED ELEMENTS AND EDGE CASES
  ; ----------------------------------------------------------------------------

  |edge-cases

    ; --- Embedded element variations ---
    |p Simple |{em emphasis} in prose.
    |p Multiple: |{em one}, |{strong two}, and |{code three}.
    |p With attributes: |{a :href /foo :title "Link title" click here} works.
    |p Nested: |{strong This is |{em very} important} stuff.
    |p Complex: See |{a :href /doc the |{em official} |{code API} docs} for details.

    ; --- Structural variations ---
    |empty                               ; Empty element
    |.just-classes.another-class         ; Classes only (mixin definition)
    |[only-id]                           ; ID only
    |outer :a 1 |middle :b 2 |inner :c 3 Content here ; Chained inline

    ; --- Value type edge cases ---
    |test-values
      :simple-list [one two three]
      :with-spaces ["hello world" "foo bar" simple]
      :mixed-types [42 3.14 true null "string"]
      :empty-list  []
      :single      [only-one]

    ; --- Deeply nested structure ---
    |level-1 |level-2 |level-3 |level-4 :deep true Finally at the bottom!

    ; Same thing expanded:
    |level-1
      |level-2
        |level-3
          |level-4
            :deep true
            Finally at the bottom!

  ; ----------------------------------------------------------------------------
  ; REAL-WORLD EXAMPLE — Technical documentation with embedded data
  ; ----------------------------------------------------------------------------

  |doc[api-guide].technical
    :version 2.1.0
    :last-updated 2025-12-22
    :authors ["Joseph Wecker" "Contributors"]

    ## Authentication

    All API requests require a bearer token. Obtain one from the
    |{a :href /oauth OAuth endpoint} using your |{code client_id} and
    |{code client_secret}.

    |endpoint[auth-token] :method POST :path /oauth/token
      :rate-limit |{limit :requests 10 :window 60s}

      Request an access token. Returns |{code :type response token} valid
      for |{duration :seconds 3600 one hour}.

    Token format: |{code Bearer <token>}. Include in the
    |{code Authorization} header of all subsequent requests.

    ## User Endpoints

    The |{code /users} resource supports full |{abbr :title "Create, Read, Update, Delete" CRUD}
    operations. All responses include |{field :name _links :type object HAL-style links}.

    |endpoint[create-user] :method POST :path /users
      :auth required
      :rate-limit |{limit :requests 100 :window 60s}

      Creates a new user. The |{field :name email :required} field must be
      unique. Optional fields include |{field :name name}, |{field :name avatar_url},
      and |{field :name metadata :type object}.

      |example :type request
        |{code-block :lang json {"email": "alice@example.com", "name": "Alice"}}

      |example :type response :status 201
        |{code-block :lang json {"id": "usr_abc123", "email": "alice@example.com"}}

      Possible errors:
        |error :code 400 validation failed,
        |error :code 409 email already exists.

    ## Rate Limiting

    All endpoints are rate-limited. When you exceed the limit, the API returns
    |{status :code 429 Too Many Requests} with a |{header :name Retry-After}
    header indicating seconds until the limit resets.

    Current limits by tier:
    '| Tier       | Requests/min | Burst    |
    '|------------|--------------|----------|
    '| Free       | |{n 60}      | |{n 10}  |  ; It is assumed that inlines like |{..} are
    '| Pro        | |{n 600}     | |{n 100} |  ;   processed before any markdown rendering/processing
    '| Enterprise | |{n 6000}    | |{n 1000}|


    For higher limits, |{a :href /contact contact sales} or see the
    |{a :href /docs/enterprise Enterprise documentation}.

  ; ----------------------------------------------------------------------------
  ; TRIPLE-BACKTICK ESCAPE (Rare — for edge cases only)
  ; ----------------------------------------------------------------------------

  |raw-example
    :description "Sometimes you need to break free of indentation"

    Here's content that uses the rare triple-backtick escape ```
  This content ignores indentation rules entirely.
      We can start wherever we want.
    Go back to column 0.
  |this-pipe-is-literal-text-not-an-element
  :this-colon-too
  ```

    Back to normal UDON parsing now.

  ; ============================================================================
  ; End of comprehensive example
  ; ============================================================================

  ```

  ## Your Task

  The following term was pulled randomly from a grab-bag of tech/AI/HCI
  buzzwords to spark potentially novel and creative usage scenarios:

  **Chaos engineering**

  Explore any unexpected connections or potential applications:

  1. Does UDON's mixed prose+structure model offer anything useful here?
  2. Any surprising synergies you notice?
  3. Would practitioners in this area benefit, or is UDON irrelevant?

  **Think especially in terms of novel DSLs that UDON could uniquely facilitate.**
  UDON offers multiple "tiers of voice" (prose, elements, inline elements,
  attributes, comments, templating) that could serve as a substrate for
  domain-specific languages. What DSL might emerge for this domain?

  Think freely. We're looking for genuine insight, not forced connections.
  If UDON is genuinely unhelpful for this domain, say so directly.

  ---

  ## Feedback (Optional)

  After your main response, you're welcome to share additional thoughts:

  ```
  # FEEDBACK:
  # Your thoughts here...
  ```
response: "# Chaos Engineering & UDON: A Surprisingly Good Fit\n\nI'm genuinely surprised
  by this pairing—there's actually significant potential here. Let me think through
  this honestly.\n\n## The Core Synergy: Declarative Chaos as Living Documentation\n\nChaos
  engineering traditionally suffers from a documentation problem: the *intent* of
  an experiment, its *implementation*, the *results*, and the *lessons learned* live
  in different systems (Jira tickets, code repositories, wiki pages, monitoring dashboards).
  UDON's mixed prose+structure model could create **executable documentation** where
  chaos experiments are simultaneously:\n\n1. Human-readable explanations of what
  you're testing and why\n2. Machine-executable specifications\n3. Results and analysis
  in the same artifact\n\n## A Chaos Engineering DSL in UDON\n\nHere's what genuinely
  excites me:\n\n```udon\n|chaos-experiment[network-partition-checkout]\n  :status
  active\n  :severity high\n  :steady-state-hypothesis verified-2025-01-15\n  \n  ##
  Hypothesis\n  \n  When the payment service experiences a |{duration 5s} network
  partition \n  during checkout, the system will:\n  \n  - Maintain order state in
  the queue\n  - Display appropriate user messaging within |{duration 2s}\n  - Complete
  the transaction when connectivity resumes\n  - Emit |{metric checkout.partial_failure}
  events for monitoring\n  \n  We believe this because |{ticket ARCH-423} implemented
  idempotent \n  payment processing and the circuit breaker pattern, but we've never
  \n  validated it under actual partition conditions.\n  \n  |baseline-metrics\n    :checkout-success-rate
  [0.98 0.99]  ; acceptable range\n    :p99-latency [< 3s]\n    :error-rate [< 0.02]\n
  \ \n  |attack[partition-payment-service]\n    :type network-partition\n    :target
  service:payment-service\n    :duration 5s\n    :scope pods=3  ; affect 3 of 5 pods\n
  \   \n    :schedule\n      :start-time 2025-01-20T14:00:00Z\n      :business-hours
  true  ; intentionally during load\n      :approval-required true\n      :rollback-trigger\n
  \       |condition :metric error_rate :threshold 0.10 :duration 30s\n        |condition
  :metric p99_latency :threshold 10s\n    \n    |safety-constraints\n      :max-concurrent-experiments
  1\n      :require-on-call-approval true\n      :abort-if [deployment-in-progress
  incident-active]\n  \n  ## Execution Log\n  \n  ### Run 2025-01-15 14:23:18 UTC\n
  \ \n  |run[20250115-142318]\n    :executor sarah.chen@example.com\n    :blast-radius
  15  ; percentage of traffic\n    :outcome success\n    \n    Started partition at
  14:23:18. Initial impact:\n    \n    - Checkout latency increased to |{metric :value
  4.2s p99}\n    - Circuit breaker opened at 14:23:21 (|{duration 3s} after partition)\n
  \   - User-facing error rate: |{metric :value 0.03 3%} (within tolerance)\n    -
  Queue depth increased from 45 → 234 messages\n    \n    Partition ended at 14:23:23.
  Recovery:\n    \n    - Circuit breaker closed at 14:23:28\n    - Queue processed
  completely by 14:23:45\n    - All 234 checkouts completed successfully\n    - No
  payment duplicates detected ✓\n    \n    |metrics-snapshot\n      :during-partition\n
  \       :error-rate 0.031\n        :p99-latency 4.2s\n        :p50-latency 2.1s\n
  \     :post-recovery\n        :error-rate 0.009\n        :p99-latency 1.8s\n        :queue-recovery-time
  22s\n    \n    **Verdict**: Hypothesis confirmed. System behavior matches expectations.\n
  \   \n    |observation\n      Circuit breaker timeout of |{duration 5s} might be
  too aggressive. \n      Consider increasing to |{duration 8s} based on queue processing
  time.\n      Filed |{ticket INFRA-892} for discussion.\n  \n  ### Run 2024-12-10
  10:15:33 UTC\n  \n  |run[20241210-101533]\n    :executor mike.rodriguez@example.com\n
  \   :blast-radius 10\n    :outcome failure\n    \n    **ABORTED**: Error rate exceeded
  10% threshold within 15s of partition start.\n    \n    Root cause: Circuit breaker
  configuration was missing from new payment-v2 \n    pods deployed in |{ticket DEPLOY-334}.
  The |{code @CircuitBreaker} \n    annotation was present but Spring configuration
  was incomplete.\n    \n    |remediation\n      :immediate Rolled back payment-v2
  deployment\n      :followup Added circuit breaker tests to deployment pipeline (|{pr
  1847})\n      :learning Update pre-experiment checklist to verify circuit breaker
  metrics\n```\n\n## Why This Works\n\n**1. Literate Chaos**: The prose isn't decorative—it
  captures the *reasoning* that disappears in pure code or pure tickets. Why did we
  think this would work? What were we actually afraid of?\n\n**2. Temporal Layering**:
  Multiple runs accumulate in the same document. You see how understanding evolved.
  That December failure informs January's success.\n\n**3. Inline Metrics as First-Class
  Citizens**: `|{metric :value 0.03 3%}` embeds actual measurements in prose without
  breaking reading flow. This is huge for post-mortems.\n\n**4. Safety as Structure**:
  The `|safety-constraints` and `|rollback-trigger` aren't buried in code—they're
  visible, auditable, and part of the documentation.\n\n**5. Cross-References**: `|{ticket
  ARCH-423}` and `|{pr 1847}` link causally to other systems while maintaining narrative
  coherence.\n\n## The Novel DSL Elements\n\n```udon\n|game-day[q4-resilience-validation]\n
  \ :date 2025-03-15\n  :participants [sre-team backend-team platform-team]\n  \n
  \ ## Scenario: Payment Provider Cascade Failure\n  \n  We'll simulate |{vendor Stripe}
  experiencing a |{duration 10m} outage\n  while |{vendor PayPal} is degraded (50%
  error rate). This exercises our\n  multi-provider fallback logic implemented in
  |{quarter Q3-2024}.\n  \n  |experiment[stripe-total-failure] :parallel\n  |experiment[paypal-degradation]
  :parallel\n  \n  |observer[customer-impact-monitor]\n    :dashboard ops/checkout-health\n
  \   :alert-on [error-rate > 5%, revenue-per-minute < $5000]\n  \n  Expected behavior:\n
  \ - Automatic failover to |{vendor Adyen} as tertiary provider\n  - Customer-visible
  messaging: \"Payment processing slower than usual\"\n  - No revenue loss (transactions
  queue for retry)\n  \n  ## Actual Results\n  \n  !include results/game-day-2025-03-15.udon\n
  \ \n  |retrospective\n    What went well:\n    - Failover logic worked perfectly\n
  \   - Monitoring caught issues within |{duration 30s}\n    \n    What surprised
  us:\n    - |{vendor Adyen} rate limits kicked in—we'd never tested at this volume\n
  \   - Customer support received 47 calls (expected ~10)\n    \n    Action items:\n
  \   - Pre-negotiate rate limit increase with Adyen (|{ticket VENDOR-234})\n    -
  Update customer messaging to be more specific (|{ticket UX-445})\n```\n\n## Where
  UDON Might Be Irrelevant\n\n**Execution engines**: If you need a chaos tool to actually
  execute attacks, UDON is just a specification format. You'd still need something
  like Chaos Mesh, Gremlin, or Litmus to do the work.\n\n**Real-time coordination**:
  During an active experiment, you need dashboards and real-time metrics, not text
  files.\n\n**Statistical rigor**: If you're doing sophisticated analysis (statistical
  significance tests, etc.), you'd export to R/Python, not do it in UDON.\n\n## The
  Honest Assessment\n\nThis is one of the better fits I could imagine. Chaos engineering
  is **fundamentally about learning**, and learning artifacts need to be readable
  by future humans while containing enough structure to be useful. Most chaos tools
  give you either:\n\n- Runbooks (pure prose, hard to execute"
success:
notes:
feedback:
created_at: '2025-12-24T02:20:56Z'
